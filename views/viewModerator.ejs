<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" type="text/css" href="../../public/css/styles.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>
  <form style="margin: 5%" action="http://localhost:4200/api/moderator/update" method="POST" #form>
    <a href="http://localhost:4200" style="float: right;">Go To Dashboard</a>
    <div class="form-group">
        <label for="name">Moderator name</label>
        <input type="text" class="form-control form-control-lg" id="name" name="name" value="<%= mod.name %>" />
    </div>
    <div class="form-group">
        <label for="name">Address</label>
        <input type="text" class="form-control" id="address" name="address" value="<%= mod.address %>" />
    </div>
    <div class="form-group">
        <label for="name">Phone</label>
        <input type="number" class="form-control" id="phone" name="phone" value="<%= mod.phone %>" />
    </div>
    <input type="text" class="form-control" id="companyId" name="companyId" value="824187727"  />
    <input type="text" class="form-control" id="moderatorId" name="moderatorId" value="<%= mod.moderatorId %>" hidden />
    <input type="submit" class="btn btn-primary btn-block btn-lg" value="Save Changes" (click)="form.submit()" />
    <input type="submit" class="btn btn-primary btn-block btn-lg" style="background-color:red" name="DeleteModerator"
      value="Delete Moderator" onclick="deleteClick(event)" />
  </form>
  <label style="color:green;margin-left:2%"><%= success %></label>

  <label style="color:red;margin-left:2%"><%= error %></label>

  <script>
    function deleteClick(e) {
      var queueId = $( "#moderatorId" ).val();
      var companyId = $( "#companyId" ).val();
      e.preventDefault();
      $.ajax({
        type: "DELETE",
        url: "http://localhost:4200/api/moderator/delete",
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        data: {moderatorId: moderatorId, companyId: companyId},
        success: function(msg){
            window.location = "http://localhost:4200";
        }
      });
    }
  </script>

</body>

</html>
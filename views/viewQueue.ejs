<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" type="text/css" href="../../public/css/styles.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<body>
  <form style="margin: 5%" action="http://localhost:4200/api/queue/update" method="POST" #form>
    <a href="http://localhost:4200" style="float: right;">Go To Dashboard</a>
    <div class="form-group">
      <label for="name">Queue name</label>
      <input type="text" class="form-control form-control-lg" id="name" name="name" value="<%= name %>" required pattern=".*\S+.*"  />
    </div>
    <div class="form-group">
      <label for="name">Description</label>
      <input type="text" class="form-control" id="description" name="description" value="<%= description %>" required pattern=".*\S+.*"  />
    </div>
    <div class="form-group row justify-content-center">
      <div class="col-xs">
        <label for="startTime">Start time</label>
        <input type="time" id="startTime" name="startTime" value="<%= startTime %>"> </timepicker>
      </div>
      <div class="col-xs offset-md-3">
        <label for="closingTime">Closing time</label>
        <input type="time" id="closeTime" name="closeTime" value="<%= closeTime %>"></timepicker>
      </div>
    </div>
    <div class="form-group" hidden>
      <label for="name">Company ID</label>
      <input type="text" class="form-control" id="companyId" name="companyId" value="824187727"  />
    </div>
    <input type="text" class="form-control" id="queueId" name="queueId" value="<%= queueId %>" hidden />
    <input type="submit" class="btn btn-primary btn-block btn-lg" value="Update Queue" (click)="form.submit()" />
    <input type="submit" class="btn btn-primary btn-block btn-lg" style="background-color:red" name="DeleteQueue"
      value="Delete Queue" onclick="deleteClick(event)" />
  </form>
  <label style="color:green;margin-left:2%"><%= success %></label>

  <label style="color:red;margin-left:2%"><%= error %></label>

  <script>
    function deleteClick(e) {
      var queueId = $( "#queueId" ).val();
      var companyId = $( "#companyId" ).val();
      e.preventDefault();
      $.ajax({
    type: "DELETE",
    url: "http://localhost:4200/api/queue/delete",
    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
    data: {queueId: queueId, companyId:companyId},
    success: function(msg){
        window.location = "http://localhost:4200";
    }
});
    }
  </script>

</body>

</html>